<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Nepali Varna Malaa ra Shabda Sikaun — Home</title>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
  :root{--bg1:#fce3f2;--bg2:#d9e8ff;--card:#fff;--accent:#ff6f91;--accent2:#ff9a76;--key:#ffe066}
  *{box-sizing:border-box}
  body{margin:0;font-family:'Mangal',sans-serif;background:linear-gradient(120deg,var(--bg1),var(--bg2));min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:18px}
  header{width:100%;max-width:1100px;display:flex;align-items:center;justify-content:space-between;gap:12px}
  h1{margin:6px 0;color:#8b1744;text-shadow:1px 1px #fff}
  .container{width:100%;max-width:1100px;background:var(--card);border-radius:14px;padding:16px;box-shadow:0 8px 24px rgba(0,0,0,0.08);margin-top:12px}
  .top-row{display:flex;gap:12px;flex-wrap:wrap}
  .left,.right{flex:1;min-width:300px}
  .display{background:linear-gradient(180deg,#7d7b7b 0%, #fffef8 100%);border-radius:10px;padding:80px;text-align:center;font-size:34px;min-height:100px;box-shadow:0 6px 16px rgba(0,0,0,0.08);margin-bottom:10px}
  .vowel-list{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .vowel-card{background:#fff;border-radius:8px;padding:8px 10px;box-shadow:0 4px 8px rgba(0,0,0,0.03);font-weight:700}
  .maatra-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
  .maatra{background:#fff2;border-radius:8px;padding:10px 12px;box-shadow:0 4px 8px rgba(0,0,0,0.03);cursor:pointer}
  .board{display:grid;grid-template-columns: repeat(6, 1fr);gap:10px;margin-top:10px}
  .key{background:var(--key);border-radius:10px;padding:14px;text-align:center;font-size:20px;cursor:pointer;box-shadow:0 6px 12px rgba(0,0,0,0.08);transition:transform .12s,background .12s}
  .key:hover{transform:scale(1.06);background:var(--accent2);color:#fff}
  .special{background:var(--accent);color:#fff}
  .controls{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap}
  .btn{padding:8px 12px;border-radius:8px;cursor:pointer;border:none;font-weight:600}
  footer{width:100%;max-width:1100px;text-align:center;margin-top:18px;color:#444;opacity:0.9;font-size:14px}
  @media (max-width:760px){.board{grid-template-columns:repeat(4,1fr)}.top-row{flex-direction:column}}
</style>
</head>
<body>
<header>
  <h1>नेपाली वर्ण माला र शब्द सिकाऔं</h1>
  <div>
    <a href="practice.html" class="btn" style="background:var(--accent);color:#fff;padding:8px 12px;border-radius:8px;text-decoration:none">Practice (शब्द लेखौँ)</a>
  </div>
</header>

<div class="container">
  <div class="top-row">
    <div class="left">
      <!-- <div style="font-weight:700;font-size:18px;margin-bottom:6px">स्वर (Independent vowels)</div> -->

      <!-- Independent vowels placed first (as requested) -->
      <div class="vowel-list" id="vowelList">
        <div class="vowel-card">अ</div>
        <div class="vowel-card">आ</div>
        <div class="vowel-card">इ</div>
        <div class="vowel-card">ई</div>
        <div class="vowel-card">उ</div>
        <div class="vowel-card">ऊ</div>
        <div class="vowel-card">ऋ</div>
        <div class="vowel-card">ए</div>
        <div class="vowel-card">ऐ</div>
        <div class="vowel-card">ओ</div>
        <div class="vowel-card">औ</div>
        <div class="vowel-card">अं</div>
        <div class="vowel-card">अः</div>
      </div>

      <!-- Maathraa / aakaar buttons directly under the vowels -->
      <!-- <div style="margin-top:12px;font-weight:700">मात्रा / आकार (तथा अंक):</div> -->
      <div class="maatra-row" id="maatraRow">
        <div class="maatra">ा</div>
        <div class="maatra">ि</div>
        <div class="maatra">ी</div>
        <div class="maatra">ु</div>
        <div class="maatra">ू</div>
        <div class="maatra">े</div>
        <div class="maatra">ै</div>
        <div class="maatra">ो</div>
        <div class="maatra">ौ</div>
        <div class="maatra">ं</div>
        <div class="maatra">ः</div>
      </div>

      <!-- <div style="margin-top:14px;font-weight:700">Display (स्क्रिन)</div> -->
      <div id="display" class="display"></div>

      <div class="controls">
        <button id="btn-plus" class="btn">+</button>
        <button id="btn-halant" class="btn">\</button>
        <button id="btn-del" class="btn">Del</button>
        <button id="btn-clear" class="btn">C</button>
        <button id="btn-eq" class="btn" style="background:#8bd3a8">=</button>
        <button id="btn-save" class="btn" style="background:#ffd166">Save</button>
        <button id="btn-load" class="btn" style="background:#a0c4ff">Load</button>
      </div>

      <!-- <div style="margin-top:10px;color:#555;font-size:14px">
        Tip: independent vowel माथिबाट छान्छौ, मत्राहरू तलबाट छान्छौ। अक्षर + मात्रा मिलाएर जोड्दा display मा syllable बनेको देखिन्छ। "=" दबाउँदा result save हुन्छ।
      </div> -->
    </div>

    <div class="right">
      <!-- <div style="font-weight:700;font-size:18px">वर्ण-पट्टिका (क–ज्ञ)</div> -->
      <div id="board" class="board" style="margin-top:10px"></div>
    </div>
  </div>
</div>

<footer>© 2025 Sanskas Digital — बच्चाहरुका लागि सरल र रमाइलो तरीका</footer>

<script>
/* ---------- data ---------- */
const consonants = [
'क','ख','ग','घ','ङ','च','छ','ज','झ','ञ','ट','ठ','ड','ढ','ण',
'त','थ','द','ध','न','प','फ','ब','भ','म','य','र','ल','व','श',
'ष','स','ह','क्ष','त्र','ज्ञ'
];
const vowels = ['ा','ि','ी','ु','ू','े','ै','ो','ौ','ं','ः'];

/* render consonant board */
const board = document.getElementById('board');
consonants.forEach(ch=>{
  const el = document.createElement('div');
  el.className = 'key consonant';
  el.textContent = ch;
  board.appendChild(el);
});

/* display logic */
const display = document.getElementById('display');
let lastConsonant = '';
function playClick(freq=350,type='square',len=0.06){
  try{
    const Ctx = window.AudioContext||window.webkitAudioContext;
    const ctx = new Ctx();
    const o = ctx.createOscillator(), g = ctx.createGain();
    o.type = type; o.frequency.value = freq; g.gain.value = 0.12;
    o.connect(g); g.connect(ctx.destination); o.start(); o.stop(ctx.currentTime + len);
  }catch(e){}
}

/* handle clicks for whole container: vowels, maatra, board */
document.body.addEventListener('click', (ev)=>{
  const t = ev.target;
  // maatra buttons
  if(t.classList.contains('maatra')){
    playClick(520,'sine',0.08);
    // treat as vowel sign: if lastConsonant exists, combine; else append
    if(lastConsonant){
      display.textContent = display.textContent.slice(0,-1) + lastConsonant + t.textContent;
      lastConsonant = '';
    } else {
      display.textContent += t.textContent;
    }
    return;
  }
  // independent vowel cards
  if(t.classList.contains('vowel-card')){
    playClick(420,'sine',0.06);
    display.textContent += t.textContent;
    lastConsonant = '';
    return;
  }
  // consonant keys
  if(t.classList.contains('consonant')){
    playClick(360,'square',0.06);
    display.textContent += t.textContent;
    lastConsonant = t.textContent;
    return;
  }
});

/* control buttons */
document.getElementById('btn-del').addEventListener('click', ()=>{
  playClick(260,'square',0.06); display.textContent = display.textContent.slice(0,-1); lastConsonant='';
});
document.getElementById('btn-clear').addEventListener('click', ()=>{
  playClick(260,'sawtooth',0.06); display.textContent=''; lastConsonant='';
});
document.getElementById('btn-halant').addEventListener('click', ()=>{
  playClick(460,'triangle',0.06); display.textContent += '्'; lastConsonant='';
});
document.getElementById('btn-plus').addEventListener('click', ()=>{
  playClick(420,'triangle',0.06); display.style.transform='scale(0.98)'; setTimeout(()=>display.style.transform='scale(1)',110);
});
document.getElementById('btn-eq').addEventListener('click', ()=>{
  const res = display.textContent.trim();
  if(res) {
    // small celebration
    playClick(760,'sine',0.08); confetti({particleCount:20,spread:50,origin:{y:0.6}});
    // save temporarily to localHistory
    const hist = JSON.parse(localStorage.getItem('nepali_hist')||'[]'); hist.push(res); localStorage.setItem('nepali_hist', JSON.stringify(hist));
    // flash
    display.style.background = 'linear-gradient(90deg,#fff,#f0fff4)'; setTimeout(()=>display.style.background='',350);
  } else { playClick(160,'sawtooth',0.12); }
});
document.getElementById('btn-save').addEventListener('click', ()=>{ localStorage.setItem('nepali_display', display.textContent); playClick(600,'sine',0.08); });
document.getElementById('btn-load').addEventListener('click', ()=>{ display.textContent = localStorage.getItem('nepali_display')||''; playClick(420,'sine',0.08); });
</script>
</body>
</html>
